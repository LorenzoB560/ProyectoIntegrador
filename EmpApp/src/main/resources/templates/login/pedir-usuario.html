<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Iniciar sesión</title>
    <link rel="stylesheet" th:href="@{/css/login-estilos.css}">
</head>
<body>
<div class="container">
    <h2>Iniciar sesión</h2>
    <form th:action="@{/empapp/procesar-usuario}" method="post" th:object="${dto}">
        <!-- Si hay historial, mostrar select, si no, input -->
        <div th:if="${historial == null or #maps.isEmpty(historial)}">
            <input type="text" th:field="*{correo}" placeholder="Correo electrónico" required>
        </div>
        <div th:if="${historial != null and !#maps.isEmpty(historial)}">
            <label for="correoSelect">Selecciona un usuario:</label>
            <select id="correoSelect" th:field="*{correo}">
                <option value="" disabled selected>Selecciona un usuario</option>
                <option th:each="entry : ${historial}"
                        th:value="${entry.key}"
                        th:text="${entry.key + ' (' + entry.value + ' accesos)'}"></option>
            </select>
            <div>
                <a href="#" onclick="alternarEntradaUsuario();return false;"><b>Introducir nuevo usuario</b></a>
            </div>
            <input type="text" th:field="*{correo}" id="nuevoCorreo" placeholder="Nuevo correo" style="display:none;">
        </div>
        <div class="error" th:if="${#fields.hasErrors('correo')}" th:errors="*{correo}"></div>
        <button type="submit" class="button">Siguiente</button>
    </form>
</div>
<script th:src="@{/js/funciones.js}"></script>
</body>
</html>
